<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Google 雲端硬碟 : 登錄</title>
    <link rel="stylesheet" href="password_style.css">

</head>
<body>
    <div class="login-container">
        <img src="image/google_icon.png" alt="google_icon" id = "google_icon">
        <div class="login-content">
            <h1 style="font-weight : 350;">歡迎使用</h1>
            <a href="../index.html"></a>
        </div>
        <div class="input-field">
            <div class="input-field-left">
                <input type="email" id="email" required autofocus placeholder="">
                <label for="email">電子郵件地址或電話號碼</label>
                <p>
                    <a  href="clown.html" style = "color: #abc7f8; font-size: 14px; text-decoration: none; ">忘記電子郵件地址？</a>
                </p>
                <br>
                <p style="font-size: 14px; color: #c2c5c3;">如果這不是你的電腦，請使用訪客模式以私密方式登入。
                    <a  href="clown.html" style = "color: #abc7f8; font-size: 14px; text-decoration: none; "> 進一步瞭解如何使用訪客模式</a>
                </p>
            </div>
            <div class="input-field-right">
                <input type="password" id="password" required autofocus placeholder="">
                <label for="password">輸入你的密碼</label>
                <p class="null-password">請輸入密碼</p>
                <div class="show-password">
                    <input type="checkbox" id="showPasswordCheckbox" style="margin-right: 5px;">
                    <p>顯示密碼</p>
                </div>
            </div>


        </div>

        <div class="bottom-actions">
            <p class="create-account"><a href="clown.html" style="color: #abc7f8; font-size: 14px; text-decoration: none;">試試其他方法</a></p>
            <button class="next-step"><a href="clown.html" style="color: #254480; text-decoration: none;">下一步</a></button>
        </div>
        <div class="navbar" >
            <div class="language-selector">
                <select >
                    <option selected>繁體中文</option>
                </select>
            </div>
            <div class="nav-links">
                <a href="clown.html">說明</a>
                <a href="clown.html">隱私權設定</a>
                <a href="clown.html">條款</a>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('password');
    const nullPasswordMsg = document.querySelector('.null-password');

    // 确保初始状态下错误提示是隐藏的
    nullPasswordMsg.style.display = 'none';

    // 下一步按钮点击事件
    const nextButton = document.querySelector('.next-step');
    nextButton.addEventListener('click', function(e) {
        e.preventDefault(); // 确保先阻止默认行为

        if (!passwordInput.value.trim()) {
            // 如果密码为空，显示错误提示并将输入框变为错误状态
            nullPasswordMsg.style.display = 'block';
            passwordInput.classList.add('error');
            return; // 阻止继续执行
        }

        // 密码不为空，移除错误状态
        nullPasswordMsg.style.display = 'none';
        passwordInput.classList.remove('error');

        // 继续执行后续逻辑，跳转到下一页面
        window.location.href = 'clown.html';
    });

    // 完全阻止a标签的默认跳转行为，统一由按钮点击事件处理
    const nextLink = document.querySelector('.next-step a');
    if (nextLink) {
        nextLink.addEventListener('click', function(e) {
            e.preventDefault(); // 始终阻止默认行为
        });
    }

    // 按下Enter键时触发下一步
    passwordInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            nextButton.click();
        }
    });

    // 页面加载动画和邮箱显示
    const inputField = document.querySelector('.input-field');
    // 先移除再加入，确保动画可重复触发
    inputField.classList.remove('slide-left');
    setTimeout(() => inputField.classList.add('slide-left'), 100);

    const savedEmail = localStorage.getItem('userEmail');
    const link = document.querySelector('.login-content a');
    if (savedEmail && link) {
        const emailToUse = savedEmail.includes('@') ? savedEmail : savedEmail + '@gmail.com';
        link.href = `../index.html?email=${encodeURIComponent(emailToUse)}`;
        link.textContent = emailToUse;
    }

    // 显示/隐藏密码功能
    const showPasswordCheckbox = document.getElementById('showPasswordCheckbox');
    showPasswordCheckbox.addEventListener('change', function() {
        passwordInput.type = this.checked ? 'text' : 'password';
    });
});

// 页面缓存处理
window.addEventListener('pageshow', function(event) {
    if (event.persisted) {
        location.reload();
    }
});
    </script>
</body>
</html>